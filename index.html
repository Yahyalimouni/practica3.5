
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.45">
    
    
      
        <title>Practica3.5 - Desplegar una app Flask</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.0253249f.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="cyan" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#practica-35" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="Practica3.5 - Desplegar una app Flask" class="md-header__button md-logo" aria-label="Practica3.5 - Desplegar una app Flask" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Practica3.5 - Desplegar una app Flask
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Practica 3.5
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="https://yahyalimouni.github.io" class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="https://yahyalimouni.github.io/practica2/" class="md-tabs__link">
        
  
    
  
  Practica2.1

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="https://yahyalimouni.github.io/practica2.2/" class="md-tabs__link">
        
  
    
  
  Practica2.2

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="https://yahyalimouni.github.io/practica2.3/" class="md-tabs__link">
        
  
    
  
  Practica2.3

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="https://yahyalimouni.github.io/practica2.4/" class="md-tabs__link">
        
  
    
  
  Practica2.4

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="https://yahyalimouni.github.io/practica2.5/" class="md-tabs__link">
        
  
    
  
  Practica2.5

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="https://yahyalimouni.github.io/practica2.6/" class="md-tabs__link">
        
  
    
  
  Practica2.6

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="https://yahyalimouni.github.io/practica3.4/" class="md-tabs__link">
        
  
    
  
  Practica3.3.4

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="https://yahyalimouni.github.io/practica3.5/" class="md-tabs__link">
        
  
    
  
  Practica3.5

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="Practica3.5 - Desplegar una app Flask" class="md-nav__button md-logo" aria-label="Practica3.5 - Desplegar una app Flask" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Practica3.5 - Desplegar una app Flask
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://yahyalimouni.github.io" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://yahyalimouni.github.io/practica2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Practica2.1
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://yahyalimouni.github.io/practica2.2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Practica2.2
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://yahyalimouni.github.io/practica2.3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Practica2.3
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://yahyalimouni.github.io/practica2.4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Practica2.4
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://yahyalimouni.github.io/practica2.5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Practica2.5
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://yahyalimouni.github.io/practica2.6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Practica2.6
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://yahyalimouni.github.io/practica3.4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Practica3.3.4
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://yahyalimouni.github.io/practica3.5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Practica3.5
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduccion" class="md-nav__link">
    <span class="md-ellipsis">
      Introducción
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#instalar-herramientas-de-python" class="md-nav__link">
    <span class="md-ellipsis">
      Instalar herramientas de Python:
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#crear-proyecto" class="md-nav__link">
    <span class="md-ellipsis">
      Crear proyecto:
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#flask-gunicorn" class="md-nav__link">
    <span class="md-ellipsis">
      Flask &amp;&amp; Gunicorn
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ejercicio" class="md-nav__link">
    <span class="md-ellipsis">
      Ejercicio:
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wsgi" class="md-nav__link">
    <span class="md-ellipsis">
      WSGI:
    </span>
  </a>
  
    <nav class="md-nav" aria-label="WSGI:">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definicion" class="md-nav__link">
    <span class="md-ellipsis">
      Definicion
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flujo" class="md-nav__link">
    <span class="md-ellipsis">
      Flujo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="practica-35">Practica 3.5</h1>
<h2 id="introduccion">Introducción</h2>
<p>Esta práctica consistirá en desplegar una aplicación Flask utilizando un servidor <strong>WSGI</strong> (Gunicorn), que actuará como intermediario entre el servidor web <strong>Nginx</strong> y la aplicación, que en este caso será una aplicación <strong>Flask</strong>. </p>
<h2 id="instalar-herramientas-de-python">Instalar herramientas de Python:</h2>
<p>Primero instalamos el gestor de paquetes de python</p>
<p><img alt="" src="assets/01_instalar_gestor_pip.png" /></p>
<p>Instalamos la herramienta para gestionar los entornos virtuales </p>
<p><img alt="" src="assets/02_pipenv_entornos_virtuales.png" /></p>
<h2 id="crear-proyecto">Crear proyecto:</h2>
<p>Creamos el directorio raiz de nuestro proyecto:</p>
<p><img alt="" src="assets/03_crear_raiz_app.png" /></p>
<p>Cambiamos el propietario al usuario <code>yahya</code> y al grupo <code>www-data</code></p>
<p><img alt="" src="assets/04_cambiar_prop_www-data.png" /></p>
<p>Y tambien establecimos los permisos</p>
<pre><code>sudo chmod -R 775 /var/www/flask-app
</code></pre>
<p>Creamos el archivo .env, que contiene las variables de entorno necesarias:</p>
<p><img alt="" src="assets/05_crear_env_editarlo.png" /></p>
<p>Iniciamos nuestro proyecto:</p>
<p><img alt="" src="assets/06_iniciamos_env.png" /></p>
<h2 id="flask-gunicorn">Flask &amp;&amp; Gunicorn</h2>
<p>Instalamos Flask y Gunicorn</p>
<p><img alt="" src="assets/07_instalar_dependencias.png" /></p>
<p>Creamos una aplicacion simple para probar gunicorn</p>
<p><img alt="" src="assets/08_creamos_app_simple.png" /></p>
<p>Corremos nuestro servidor flask</p>
<p><img alt="" src="assets/09_correr_servidor_flask.png" /></p>
<p>Y se aprecia que se ha desplegado correctamente:</p>
<p><img alt="" src="assets/10_desplegada.png" /></p>
<p>Y ahora lo desplegamos usando Gunicorn:</p>
<p><img alt="" src="assets/11_gunicorn.png" /></p>
<ul>
<li><code>--workers</code>: Determina cuantos procesos trabajadores van a manejar las peticiones HTTP recibidas del servidor.</li>
<li><code>--bind '0.0.0.0'</code>: Indica a Gunicorn que escuche todas las interfaces</li>
<li><code>wsgi</code>: es el nombre del modulo con la extencion .py que se va a ejecutar.</li>
<li><code>app</code>: es el nombre de instancia dentro del modulo wsgi.</li>
</ul>
<p><br></p>
<p>Determinamos la ruta donde se encuentra instalado el ejecutable de Gunicorn.</p>
<p><img alt="" src="assets/12_ruta_desdelacual_se_ejecuta.png" /></p>
<p><br></p>
<p>Inicializamos el servidor <code>nginx</code>:</p>
<p><img alt="" src="assets/13_inicializar_nginx.png" /></p>
<p><br></p>
<p>Crear un servicio externo para Gunicorn para que se ejecute automaticamente sin tener que manejarlo desde la terminal</p>
<p><img alt="" src="assets/14_crear_servicio.png" /></p>
<p><br></p>
<p>Iniciar el servicio gunicorn de nuestra app</p>
<p><img alt="" src="assets/15_iniciar_servicio.png" /></p>
<p><br></p>
<p>Configuramos nuestro servidor nginx estableciendo un proxy que redirigira las peticiones al servidor de Gunicorn</p>
<p><img alt="" src="assets/16_configurar_nginx.png" /></p>
<p><br></p>
<p>Habilitamos la configuracion:</p>
<p><img alt="" src="assets/17_link_simbolico.png" /></p>
<p><br></p>
<p>Inicializamos nginx con la configuracion establecida</p>
<p><img alt="" src="assets/18_start_nginx.png" /></p>
<p>Accedemos desde nuestra maquina anfitriona a nuestra applicacion alojada en nuestro servidor web despues haber puesto el nombre de nuestro nombre de dominio con la ip de la maquina virtual</p>
<p><img alt="" src="assets/19_anfitriona.png" /></p>
<h2 id="ejercicio">Ejercicio:</h2>
<p>Se han aplicado todos los pasos anteriores al proyecto del repositorio:</p>
<pre><code>https://github.com/raul-profesor/Practica-3.5
</code></pre>
<p><br></p>
<p><img alt="" src="assets/20_ejercicio.png" /></p>
<p>Se aprecia que se ha desplegado correctamente, y se ha podido acceder a el desde la maquina anfitriona.</p>
<h2 id="wsgi">WSGI:</h2>
<h3 id="definicion">Definicion</h3>
<p><strong>WSGI</strong> (Web Server Gateway Interface) es un estándar que define cómo los servidores web deben interactuar con las aplicaciones web escritas en Python. Este estándar permite el despliegue de aplicaciones como Django y Flask, asegurando que sean portables y puedan ser ejecutadas en cualquier servidor compatible. Un ejemplo de servidor compatible con WSGI es Gunicorn, que actúa como intermediario entre el servidor web (como Nginx) y la aplicación Python, gestionando las solicitudes HTTP y pasándolas a la aplicación para su procesamiento.</p>
<h3 id="flujo">Flujo</h3>
<ol>
<li>Cliente realiza una solicitud HTTP (por ejemplo, para una página web).</li>
<li>Nginx recibe la solicitud, gestiona conexiones y archivos estáticos, y la pasa a Gunicorn.</li>
<li>Gunicorn recibe la solicitud, la envía a la aplicación Python (como Flask o Django) a través de WSGI.</li>
<li>La aplicación Python procesa la solicitud, genera una respuesta y la devuelve a Gunicorn.</li>
<li>Gunicorn pasa la respuesta de vuelta a Nginx.</li>
<li>Nginx devuelve la respuesta final al cliente (por ejemplo, renderiza la página web en el navegador).</li>
</ol>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": ".", "features": ["navigation.tabs", "navigation.top", "search.highlight", "search.share", "navigation.tracking"], "search": "assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.83f73b43.min.js"></script>
      
    
  </body>
</html>